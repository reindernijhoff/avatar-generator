(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();function U(n){let t=2166136261;for(let e=0;e<n.length;e++)t=Math.imul(t^n.charCodeAt(e),16777619);return t+=t<<13,t^=t>>>7,t+=t<<3,t^=t>>>17,t+=t<<5,t>>>0}class A{seed;state;constructor(t){this.seed=typeof t=="string"?U(t):t,this.state=this.seed}random(){return this.state=this.state*1664525+1013904223>>>0,this.state/4294967296}randomInt(t,e){return Math.floor(this.random()*(e-t))+t}randomFloat(t,e){return this.random()*(e-t)+t}randomChoice(t){return t[this.randomInt(0,t.length)]}randomBoolean(t=.5){return this.random()<t}randomColor(t={}){const e=t.hue?this.randomInt(t.hue[0],t.hue[1]):this.randomInt(0,360),i=t.saturation?this.randomInt(t.saturation[0],t.saturation[1]):this.randomInt(50,100),r=t.lightness?this.randomInt(t.lightness[0],t.lightness[1]):this.randomInt(40,70);return`hsl(${e}, ${i}%, ${r}%)`}randomRGB(){const t=this.randomInt(0,256),e=this.randomInt(0,256),i=this.randomInt(0,256);return`rgb(${t}, ${e}, ${i})`}reset(){this.state=this.seed}}function _(){return typeof window>"u"&&typeof process<"u"&&!!process.versions?.node}function G(){return typeof window<"u"&&typeof document<"u"}function E(n){if(G()){const t=document.createElement("canvas");t.width=n,t.height=n;const e=t.getContext("2d");if(!e)throw new Error("Failed to get 2D context from canvas");return{canvas:t,ctx:e}}throw _()?new Error("canvas package must be loaded first. Use createCanvasAsync() in async context or preload the module."):new Error("Unsupported environment: not browser or Node.js")}const H={gridSize:8,density:.5,symmetry:!0,layers:1};function d(n){if(Array.isArray(n))return{r:n[0],g:n[1],b:n[2]};if(n.startsWith("#")){const t=n.slice(1);return t.length===3?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16)}:{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16)}}return{r:128,g:128,b:128}}function L(n){return`rgb(${Math.round(n.r)}, ${Math.round(n.g)}, ${Math.round(n.b)})`}function V(n){const t=n.r/255,e=n.g/255,i=n.b/255,r=Math.max(t,e,i),s=Math.min(t,e,i),o=(r+s)/2;if(r===s)return{h:0,s:0,l:o*100};const a=r-s,c=o>.5?a/(2-r-s):a/(r+s);let l=0;return r===t?l=((e-i)/a+(e<i?6:0))/6:r===e?l=((i-t)/a+2)/6:l=((t-e)/a+4)/6,{h:l*360,s:c*100,l:o*100}}function O(n,t,e){n=n/360,t=t/100,e=e/100;const i=(o,a,c)=>(c<0&&(c+=1),c>1&&(c-=1),c<1/6?o+(a-o)*6*c:c<1/2?a:c<2/3?o+(a-o)*(2/3-c)*6:o);if(t===0){const o=e*255;return{r:o,g:o,b:o}}const r=e<.5?e*(1+t):e+t-e*t,s=2*e-r;return{r:i(s,r,n+1/3)*255,g:i(s,r,n)*255,b:i(s,r,n-1/3)*255}}function I(n,t,e){return{r:n.r+(t.r-n.r)*e,g:n.g+(t.g-n.g)*e,b:n.b+(t.b-n.b)*e}}function y(n,t,e){const{hueVariation:i=0,saturationVariation:r=0,lightnessVariation:s=0}=e;if(i===0&&r===0&&s===0)return n;const o=V(n);return i>0&&(o.h=(o.h+t.randomFloat(-i,i)+360)%360),r>0&&(o.s=Math.max(0,Math.min(100,o.s+t.randomFloat(-r,r)))),s>0&&(o.l=Math.max(0,Math.min(100,o.l+t.randomFloat(-s,s)))),O(o.h,o.s,o.l)}function M(n){return!!(typeof n=="string"||Array.isArray(n)&&n.length===3&&typeof n[0]=="number")}function q(n,t,e){if(M(n))return d(n);if(Array.isArray(n)&&n.length>0){const i=n[0];if(Array.isArray(i)&&!M(i)){const r=t.randomChoice(n);return k(r,t,e)}return k(n,t,e)}return{r:128,g:128,b:128}}function k(n,t,e){if(n.length===0)return{r:128,g:128,b:128};if(n.length===1||!e)return d(t.randomChoice(n));const i=t.randomInt(0,n.length-1),r=d(n[i]),s=d(n[(i+1)%n.length]),o=t.random();return I(r,s,o)}function j(n,t){const e=n.background||"#ffffff",i=n.interpolate!==!1,r=q(e,t,i);return y(r,t,n)}function D(n,t,e,i="foreground"){const r=i==="background"?n.background:n.foreground,s=n.interpolate!==!1;if(!r)return C(t,e,n);if(M(r)){const a=d(r);return N(a,t,e,n)}if(!Array.isArray(r)||r.length===0)return C(t,e,n);const o=r[0];return Array.isArray(o)&&!M(o)?K(r,t,e,s,n):P(r,t,e,s,n)}function K(n,t,e,i,r){if(n.length===0)return C(t,e,r);if(n.length===1)return P(n[0],t,e,i,r);if(!i){const h=t.randomChoice(n);return P(h,t,e,!1,r)}const s=t.randomInt(0,n.length-1),o=(s+1)%n.length,a=n[s],c=n[o],l=t.random(),f=[];Math.max(a.length,c.length);for(let h=0;h<e;h++){const u=d(a[h%a.length]),g=d(c[h%c.length]),m=I(u,g,l);f.push(y(m,t,r))}return f}function P(n,t,e,i,r){const s=[];if(n.length===0)return C(t,e,r);if(n.length===1){const o=d(n[0]);return N(o,t,e,r)}if(!i){for(let o=0;o<e;o++){const a=n[o%n.length];s.push(y(d(a),t,r))}return s}for(let o=0;o<e;o++){const a=o%n.length,c=(a+1)%n.length,l=d(n[a]),f=d(n[c]),h=t.random();s.push(y(I(l,f,h),t,r))}return s}function C(n,t,e){const i=[],r=n.randomFloat(0,360),s=360/t;for(let o=0;o<t;o++){const a=(r+o*s)%360,c=O(a,n.randomFloat(60,90),n.randomFloat(40,70));i.push(y(c,n,e))}return i}function N(n,t,e,i){const r=[],s=V(n);for(let o=0;o<e;o++){const a=(o-Math.floor(e/2))*30,c=(s.h+a+360)%360,l=O(c,s.s,s.l);r.push(y(l,t,i))}return r}class W{random;options;grids;backgroundColor;foregroundColors;constructor(t,e){this.random=t,this.options={...H,...e},this.grids=[],this.backgroundColor={r:255,g:255,b:255},this.foregroundColors=[]}render(t){const{size:e,gridSize:i,layers:r}=this.options;this.backgroundColor=j(this.options,this.random),this.foregroundColors=D(this.options,this.random,r),t.fillStyle=L(this.backgroundColor),t.fillRect(0,0,e,e),this.initializeGrids(),this.options.symmetry&&this.applySymmetry(),this.renderLayers(t)}initializeGrids(){const{gridSize:t,density:e,layers:i}=this.options;this.grids=[];for(let r=0;r<i;r++){const s=[];for(let o=0;o<t;o++){s[o]=[];for(let a=0;a<t;a++)s[o][a]=this.random.randomBoolean(e)}this.grids.push(s)}}applySymmetry(){const{gridSize:t}=this.options,e=Math.floor(t/2);for(const i of this.grids)for(let r=0;r<t;r++)for(let s=0;s<e;s++)i[r][t-1-s]=i[r][s]}renderLayers(t){const{size:e,gridSize:i}=this.options,r=e/i;for(let s=0;s<this.grids.length;s++){t.fillStyle=L(this.foregroundColors[s]);const o=this.grids[s];for(let a=0;a<i;a++)for(let c=0;c<i;c++)o[a][c]&&t.fillRect(c*r,a*r,r,r)}}}function J(n){const{id:t,size:e}=n,i=new A(t),{canvas:r,ctx:s}=E(e);return new W(i,n).render(s),r}const Q={sources:-1,wavelength:1,sourceArea:10,sourceDistance:1};class X{random;options;sourcePoints;colors;constructor(t,e){this.random=t,this.options={...Q,...e},this.sourcePoints=[],this.colors=[]}render(t){const{size:e,wavelength:i,sourceArea:r}=this.options;let{sources:s}=this.options;s===-1&&(s=this.random.randomInt(2,5)),this.colors=D(this.options,this.random,2),this.generateSourcePoints(s,r);const o=t.createImageData(e,e);for(let a=0;a<e;a++)for(let c=0;c<e;c++){const l=c/e*2-1,f=a/e*2-1,h=this.calculateInterference(l,f,i),u=s*s,g=Math.min(1,h/u),m=I(this.colors[0],this.colors[1],g),p=(a*e+c)*4;o.data[p]=m.r,o.data[p+1]=m.g,o.data[p+2]=m.b,o.data[p+3]=255}t.putImageData(o,0,0)}generateSourcePoints(t,e){this.sourcePoints=[];for(let i=0;i<t;i++)this.sourcePoints.push({x:this.random.randomFloat(-e,e),y:this.random.randomFloat(-e,e)})}calculateInterference(t,e,i){const{sourceDistance:r}=this.options;let s=0;for(const o of this.sourcePoints){const a=t-o.x,c=e-o.y,f=Math.sqrt(a*a+c*c+r*r)/i*Math.PI*2,h=Math.sin(f);s+=h}return s*s}}function Y(n){const{id:t,size:e}=n,{canvas:i,ctx:r}=E(e),s=new A(t);return new X(s,n).render(r),i}const Z={timeOffset:-1,scale1:-1,scale2:-1,scale3:-1,weight1:-1,weight2:-1,weight3:-1,paletteSize:256};class tt{random;options;palette;time;scale1;scale2;scale3;angle1;weight1;weight2;weight3;zoom;constructor(t,e){this.random=t,this.options={...Z,...e},this.palette=[],this.time=0,this.scale1=0,this.scale2=0,this.scale3=0,this.angle1=0,this.weight1=0,this.weight2=0,this.weight3=0,this.zoom=1}render(t){const{size:e,paletteSize:i}=this.options;let{timeOffset:r,scale1:s,scale2:o,scale3:a,weight1:c,weight2:l,weight3:f}=this.options;r===-1?this.time=this.random.randomFloat(0,Math.PI*2):this.time=r,s===-1?this.scale1=this.random.randomFloat(2,4):this.scale1=s,o===-1?this.scale2=this.random.randomFloat(2,4):this.scale2=o,a===-1?this.scale3=this.random.randomFloat(15,30):this.scale3=a,this.angle1=this.random.randomFloat(0,Math.PI*2),c===-1?this.weight1=this.random.randomFloat(.5,1.5):this.weight1=c,l===-1?this.weight2=this.random.randomFloat(.5,1.5):this.weight2=l,f===-1?this.weight3=this.random.randomFloat(.5,1.5):this.weight3=f,this.generatePalette(i);const h=t.createImageData(e,e);for(let u=0;u<e;u++)for(let g=0;g<e;g++){const m=g/e-.5,p=u/e-.5,B=(this.calculatePlasma(m*this.zoom,p*this.zoom)+3)/6,R=Math.floor(B*(i-1))%i,v=this.palette[Math.max(0,Math.min(i-1,R))],b=(u*e+g)*4;h.data[b]=v.r,h.data[b+1]=v.g,h.data[b+2]=v.b,h.data[b+3]=255}t.putImageData(h,0,0)}generatePalette(t){const e=D(this.options,this.random,Math.max(2,3));this.palette=[];for(let i=0;i<t;i++){const s=i/t*e.length,o=Math.floor(s)%e.length,a=(o+1)%e.length,c=s-Math.floor(s),l=I(e[o],e[a],c);this.palette.push(l)}}calculatePlasma(t,e){const i=Math.sin(Math.PI*this.scale1*(Math.cos(this.angle1)*t+Math.sin(this.angle1)*e)+this.time),r=this.time/2,s=Math.sin(this.scale2*(Math.PI*Math.sin(r)*t+e*Math.cos(r))+this.time),o=t+.5*Math.sin(this.time/5),a=e+.5*Math.cos(this.time/3),c=Math.sqrt(o*o+a*a),l=Math.sin(Math.sqrt(this.scale3*c*c+1)+this.time);return this.weight1*i+this.weight2*s+this.weight3*l}}function et(n){const{id:t,size:e}=n,{canvas:i,ctx:r}=E(e),s=new A(t);return new tt(s,n).render(r),i}const nt={random:{},fixed:{background:"#f0f0f0",foreground:"#ff0000",interpolate:!1},palette:{background:"#ffffff",foreground:["#ff0000","#00ff00","#0000ff"],interpolate:!1},gradient:{background:"#1a1a1a",foreground:["#ff0000","#ff8800","#ffff00"],interpolate:!0},variations:{foreground:"#3366ff",hueVariation:20,saturationVariation:15,lightnessVariation:10,interpolate:!1},sets:{background:"#ffffff",foreground:[["#ff0000","#ffff00"],["#0000ff","#ff00ff"],["#00ff00","#00ffff"]],interpolate:!0}},S=document.getElementById("app"),x=document.getElementById("theme"),F=document.getElementById("colorPreset"),z=document.getElementById("layers"),T=document.getElementById("layersControl");function $(){const n=x.value;T&&(T.style.display=n==="digidoodle"?"flex":"none")}function w(){if(!S)return;S.innerHTML="";const n=x.value,t=F.value,e=parseInt(z.value),i=nt[t]||{};for(let r=1;r<=63;r++){const s=String(r);let o;n==="interference"?o=Y({id:s,size:128,sources:-1,wavelength:1,sourceArea:10,sourceDistance:1,...i}):n==="plasma"?o=et({id:s,size:128,timeOffset:-1,scale1:-1,scale2:-1,scale3:-1,paletteSize:256,...i}):o=J({id:s,size:128,gridSize:8,density:.5,symmetry:!0,layers:e,...i});const a=document.createElement("div");a.className="avatar-item",a.appendChild(o);const c=document.createElement("div");c.className="avatar-id",c.textContent=s,a.appendChild(c),S.appendChild(a)}}x&&F&&z&&(x.addEventListener("change",()=>{$(),w()}),F.addEventListener("change",w),z.addEventListener("change",w));$();w();
