(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();function B(e){let t=2166136261;for(let r=0;r<e.length;r++)t=Math.imul(t^e.charCodeAt(r),16777619);return t+=t<<13,t^=t>>>7,t+=t<<3,t^=t>>>17,t+=t<<5,t>>>0}class k{seed;state;constructor(t){this.seed=typeof t=="string"?B(t):t,this.state=this.seed}random(){return this.state=this.state*1664525+1013904223>>>0,this.state/4294967296}randomInt(t,r){return Math.floor(this.random()*(r-t))+t}randomFloat(t,r){return this.random()*(r-t)+t}randomChoice(t){return t[this.randomInt(0,t.length)]}randomBoolean(t=.5){return this.random()<t}randomColor(t={}){const r=t.hue?this.randomInt(t.hue[0],t.hue[1]):this.randomInt(0,360),i=t.saturation?this.randomInt(t.saturation[0],t.saturation[1]):this.randomInt(50,100),n=t.lightness?this.randomInt(t.lightness[0],t.lightness[1]):this.randomInt(40,70);return`hsl(${r}, ${i}%, ${n}%)`}randomRGB(){const t=this.randomInt(0,256),r=this.randomInt(0,256),i=this.randomInt(0,256);return`rgb(${t}, ${r}, ${i})`}reset(){this.state=this.seed}}function T(){return typeof window>"u"&&typeof process<"u"&&!!process.versions?.node}function $(){return typeof window<"u"&&typeof document<"u"}function D(e){if($()){const t=document.createElement("canvas");t.width=e,t.height=e;const r=t.getContext("2d");if(!r)throw new Error("Failed to get 2D context from canvas");return{canvas:t,ctx:r}}throw T()?new Error("canvas package must be loaded first. Use createCanvasAsync() in async context or preload the module."):new Error("Unsupported environment: not browser or Node.js")}const R={gridSize:8,density:.5,symmetry:!0,layers:1};function u(e){if(Array.isArray(e))return{r:e[0],g:e[1],b:e[2]};if(e.startsWith("#")){const t=e.slice(1);return t.length===3?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16)}:{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16)}}return{r:128,g:128,b:128}}function F(e){return`rgb(${Math.round(e.r)}, ${Math.round(e.g)}, ${Math.round(e.b)})`}function L(e){const t=e.r/255,r=e.g/255,i=e.b/255,n=Math.max(t,r,i),s=Math.min(t,r,i),o=(n+s)/2;if(n===s)return{h:0,s:0,l:o*100};const a=n-s,c=o>.5?a/(2-n-s):a/(n+s);let f=0;return n===t?f=((r-i)/a+(r<i?6:0))/6:n===r?f=((i-t)/a+2)/6:f=((t-r)/a+4)/6,{h:f*360,s:c*100,l:o*100}}function M(e,t,r){e=e/360,t=t/100,r=r/100;const i=(o,a,c)=>(c<0&&(c+=1),c>1&&(c-=1),c<1/6?o+(a-o)*6*c:c<1/2?a:c<2/3?o+(a-o)*(2/3-c)*6:o);if(t===0){const o=r*255;return{r:o,g:o,b:o}}const n=r<.5?r*(1+t):r+t-r*t,s=2*r-n;return{r:i(s,n,e+1/3)*255,g:i(s,n,e)*255,b:i(s,n,e-1/3)*255}}function C(e,t,r){return{r:e.r+(t.r-e.r)*r,g:e.g+(t.g-e.g)*r,b:e.b+(t.b-e.b)*r}}function h(e,t,r){const{hueVariation:i=0,saturationVariation:n=0,lightnessVariation:s=0}=r;if(i===0&&n===0&&s===0)return e;const o=L(e);return i>0&&(o.h=(o.h+t.randomFloat(-i,i)+360)%360),n>0&&(o.s=Math.max(0,Math.min(100,o.s+t.randomFloat(-n,n)))),s>0&&(o.l=Math.max(0,Math.min(100,o.l+t.randomFloat(-s,s)))),M(o.h,o.s,o.l)}function p(e){return!!(typeof e=="string"||Array.isArray(e)&&e.length===3&&typeof e[0]=="number")}function U(e,t,r){if(p(e))return u(e);if(Array.isArray(e)&&e.length>0){const i=e[0];if(Array.isArray(i)&&!p(i)){const n=t.randomChoice(e);return P(n,t,r)}return P(e,t,r)}return{r:128,g:128,b:128}}function P(e,t,r){if(e.length===0)return{r:128,g:128,b:128};if(e.length===1||!r)return u(t.randomChoice(e));const i=t.randomInt(0,e.length-1),n=u(e[i]),s=u(e[(i+1)%e.length]),o=t.random();return C(n,s,o)}function G(e,t){const r=e.background||"#ffffff",i=e.interpolate!==!1,n=U(r,t,i);return h(n,t,e)}function O(e,t,r,i="foreground"){const n=i==="background"?e.background:e.foreground,s=e.interpolate!==!1;if(!n)return b(t,r,e);if(p(n)){const a=u(n);return N(a,t,r,e)}if(!Array.isArray(n)||n.length===0)return b(t,r,e);const o=n[0];return Array.isArray(o)&&!p(o)?H(n,t,r,s,e):w(n,t,r,s,e)}function H(e,t,r,i,n){if(e.length===0)return b(t,r,n);if(e.length===1)return w(e[0],t,r,i,n);if(!i){const l=t.randomChoice(e);return w(l,t,r,!1,n)}const s=t.randomInt(0,e.length-1),o=(s+1)%e.length,a=e[s],c=e[o],f=t.random(),d=[];Math.max(a.length,c.length);for(let l=0;l<r;l++){const x=u(a[l%a.length]),v=u(c[l%c.length]),g=C(x,v,f);d.push(h(g,t,n))}return d}function w(e,t,r,i,n){const s=[];if(e.length===0)return b(t,r,n);if(e.length===1){const o=u(e[0]);return N(o,t,r,n)}if(!i){for(let o=0;o<r;o++){const a=e[o%e.length];s.push(h(u(a),t,n))}return s}for(let o=0;o<r;o++){const a=o%e.length,c=(a+1)%e.length,f=u(e[a]),d=u(e[c]),l=t.random();s.push(h(C(f,d,l),t,n))}return s}function b(e,t,r){const i=[],n=e.randomFloat(0,360),s=360/t;for(let o=0;o<t;o++){const a=(n+o*s)%360,c=M(a,e.randomFloat(60,90),e.randomFloat(40,70));i.push(h(c,e,r))}return i}function N(e,t,r,i){const n=[],s=L(e);for(let o=0;o<r;o++){const a=(o-Math.floor(r/2))*30,c=(s.h+a+360)%360,f=M(c,s.s,s.l);n.push(h(f,t,i))}return n}class _{random;options;grids;backgroundColor;foregroundColors;constructor(t,r){this.random=t,this.options={...R,...r},this.grids=[],this.backgroundColor={r:255,g:255,b:255},this.foregroundColors=[]}render(t){const{size:r,gridSize:i,layers:n}=this.options;this.backgroundColor=G(this.options,this.random),this.foregroundColors=O(this.options,this.random,n),t.fillStyle=F(this.backgroundColor),t.fillRect(0,0,r,r),this.initializeGrids(),this.options.symmetry&&this.applySymmetry(),this.renderLayers(t)}initializeGrids(){const{gridSize:t,density:r,layers:i}=this.options;this.grids=[];for(let n=0;n<i;n++){const s=[];for(let o=0;o<t;o++){s[o]=[];for(let a=0;a<t;a++)s[o][a]=this.random.randomBoolean(r)}this.grids.push(s)}}applySymmetry(){const{gridSize:t}=this.options,r=Math.floor(t/2);for(const i of this.grids)for(let n=0;n<t;n++)for(let s=0;s<r;s++)i[n][t-1-s]=i[n][s]}renderLayers(t){const{size:r,gridSize:i}=this.options,n=r/i;for(let s=0;s<this.grids.length;s++){t.fillStyle=F(this.foregroundColors[s]);const o=this.grids[s];for(let a=0;a<i;a++)for(let c=0;c<i;c++)o[a][c]&&t.fillRect(c*n,a*n,n,n)}}}function j(e){const{id:t,size:r}=e,i=new k(t),{canvas:n,ctx:s}=D(r);return new _(i,e).render(s),n}const q={sources:-1,wavelength:1,sourceArea:10,sourceDistance:1};class K{random;options;sourcePoints;colors;constructor(t,r){this.random=t,this.options={...q,...r},this.sourcePoints=[],this.colors=[]}render(t){const{size:r,wavelength:i,sourceArea:n}=this.options;let{sources:s}=this.options;s===-1&&(s=this.random.randomInt(2,5)),this.colors=O(this.options,this.random,2),this.generateSourcePoints(s,n);const o=t.createImageData(r,r);for(let a=0;a<r;a++)for(let c=0;c<r;c++){const f=c/r*2-1,d=a/r*2-1,l=this.calculateInterference(f,d,i),x=s*s,v=Math.min(1,l/x),g=C(this.colors[0],this.colors[1],v),m=(a*r+c)*4;o.data[m]=g.r,o.data[m+1]=g.g,o.data[m+2]=g.b,o.data[m+3]=255}t.putImageData(o,0,0)}generateSourcePoints(t,r){this.sourcePoints=[];for(let i=0;i<t;i++)this.sourcePoints.push({x:this.random.randomFloat(-r,r),y:this.random.randomFloat(-r,r)})}calculateInterference(t,r,i){const{sourceDistance:n}=this.options;let s=0;for(const o of this.sourcePoints){const a=t-o.x,c=r-o.y,d=Math.sqrt(a*a+c*c+n*n)/i*Math.PI*2,l=Math.sin(d);s+=l}return s*s}}function W(e){const{id:t,size:r}=e,{canvas:i,ctx:n}=D(r),s=new k(t);return new K(s,e).render(n),i}const J={random:{},fixed:{background:"#f0f0f0",foreground:"#ff0000",interpolate:!1},palette:{background:"#ffffff",foreground:["#ff0000","#00ff00","#0000ff"],interpolate:!1},gradient:{background:"#1a1a1a",foreground:["#ff0000","#ff8800","#ffff00"],interpolate:!0},variations:{foreground:"#3366ff",hueVariation:20,saturationVariation:15,lightnessVariation:10,interpolate:!1},sets:{background:"#ffffff",foreground:[["#ff0000","#ffff00"],["#0000ff","#ff00ff"],["#00ff00","#00ffff"]],interpolate:!0}},S=document.getElementById("app"),I=document.getElementById("theme"),A=document.getElementById("colorPreset"),E=document.getElementById("layers"),z=document.getElementById("layersControl");function V(){const e=I.value;z&&(z.style.display=e==="digidoodle"?"flex":"none")}function y(){if(!S)return;S.innerHTML="";const e=I.value,t=A.value,r=parseInt(E.value),i=J[t]||{};for(let n=1;n<=63;n++){const s=String(n);let o;e==="interference"?o=W({id:s,size:128,sources:-1,wavelength:1,sourceArea:10,sourceDistance:1,...i}):o=j({id:s,size:128,gridSize:8,density:.5,symmetry:!0,layers:r,...i});const a=document.createElement("div");a.className="avatar-item",a.appendChild(o);const c=document.createElement("div");c.className="avatar-id",c.textContent=s,a.appendChild(c),S.appendChild(a)}}I&&A&&E&&(I.addEventListener("change",()=>{V(),y()}),A.addEventListener("change",y),E.addEventListener("change",y));V();y();
